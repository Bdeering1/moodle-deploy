<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName moodle.local
    ServerAlias www.moodle.local

    DocumentRoot /home/vagrant/moodle/

    # Moodle requires these for clean URLs and other functionalities
    <Directory /home/vagrant/moodle/>
        Options FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Deny access to Moodle data directory
    <Directory /moodle_data/>
        Require all denied
    </Directory>

    # Error and Access Logging
    ErrorLog ${APACHE_LOG_DIR}/moodle_error.log
    CustomLog ${APACHE_LOG_DIR}/moodle_access.log combined
</VirtualHost>

# Suppress Apache's AH00558 warning
ServerName localhost
